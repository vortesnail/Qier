var Ht=function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n},Bt=function(){function n(){this._events=Object.create(null)}return n.prototype.emit=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._events[e])return!1;var o=Ht([],this._events[e]);return o.forEach(function(s){s.apply(t,r)}),!0},n.prototype.on=function(e,t){if(typeof t!="function")throw new TypeError("The event-triggered callback must be a function.");return this._events[e]?this._events[e].push(t):this._events[e]=[t],{dispose:this.off.bind(this,e,t)}},n.prototype.once=function(e,t){var r=this,i=function(){t==null||t.apply(r),r.off(e,i)};return this.on(e,i)},n.prototype.off=function(e,t){if(!this._events[e])return this;if(!t)return this._events[e]&&(this._events[e].length=0),this;for(var r,i=this._events[e].length,o=0;o<i;o++)if(r=this._events[e][o],r===t){this._events[e].splice(o,1);break}return this},n.prototype.removeAllListeners=function(e){return e?this._events[e]&&(this._events[e].length=0):this._events=Object.create(null),this},n}(),E=function(){return E=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},E.apply(this,arguments)},F={posterOptions:{disabled:!0,autoFill:!0},loadingOptions:{disabled:!1,type:"circle"},controller:{progress:["progress"],eles:["play","time","spacer","volume","settings","web-fullscreen","fullscreen"]},settings:["mirroring","speed"],menus:["loop"],showDefaultMenu:!0,videoProps:{crossorigin:"anonymous",preload:"auto",playsinline:"true"},progressOptions:{indicator:!0},shortcutOptions:{disabled:!1,seekStep:5,volumeStep:.1,showToast:!0,toastDelay:500}};function kt(n){var e=E(E(E({},F),n),{posterOptions:E(E({},F.posterOptions),n==null?void 0:n.posterOptions),loadingOptions:E(E({},F.loadingOptions),n==null?void 0:n.loadingOptions),videoProps:E(E({},F.videoProps),n==null?void 0:n.videoProps),progressOptions:E(E({},F.progressOptions),n==null?void 0:n.progressOptions),shortcutOptions:E(E({},F.shortcutOptions),n==null?void 0:n.shortcutOptions)});return e}function Ut(n){n.volume=.5}var Q=Object.prototype.toString;function x(n){return typeof n=="string"||Q.call(n)==="[object String]"}function X(n){return typeof n=="function"||Q.call(n)==="[object Function]"}function Vt(n){return typeof n=="number"||Q.call(n)==="[object Number]"}function G(n){return typeof HTMLElement=="object"?n instanceof HTMLElement:n&&typeof n=="object"&&n.nodeType===1&&typeof n.nodeName=="string"}var C="qier-player",l={PLAY:"Play",PAUSE:"Pause",ENDED:"Ended",TIME_UPDATE:"TimeUpdate",PROGRESS:"Progress",DURATION_CHANGE:"DurationChange",VOLUME_CHANGE:"VolumeChange",WAITING:"Waiting",STALLED:"Stalled",CANPLAY:"Canplay",LOADED_METADATA:"LoadedMetadata",RATE_CHANGE:"RateChange",ERROR:"Error",SEEKED:"Seeked",CONTROLLER_SHOW:"ControlShow",CONTROLLER_HIDE:"ControlHide",UPDATE_SIZE:"UpdateSize",WEB_ENTER_FULLSCREEN:"WebEnterFullscreen",WEB_EXIT_FULLSCREEN:"WebExitFullscreen",ENTER_FULLSCREEN:"EnterFullscreen",EXIT_FULLSCREEN:"ExitFullscreen",ENTER_PIP:"EnterPip",EXIT_PIP:"ExitPip",MOUNTED:"Mounted",AFTER_INIT:"AfterInit",BEFORE_DISPOSE:"BeforeDispose",AFTER_DISPOSE:"AfterDispose",POPOVER_SHOW_CHANGE:"PopoverShowChange",CONTROLLER_ELES_UPDATE:"ControllerElesUpdate",LOADING_SHOW:"LoadingShow",LOADING_HIDE:"LoadingHide"},$={CONTROLLER_BAR_HIDE:3e3,POPOVER_HIDE:300,CLICK_TOGGLE_DELAY:220},Wt=/([\w-]+)?(?:#([\w-]+))?((?:\.(?:[\w-]+))*)/;function c(n,e,t,r){r===void 0&&(r=C);var i=r===""?"":"_",o=[];n&&(o=Wt.exec(n)||[]);var s=document.createElement(o[1]||"div");return o[2]&&(s.id=o[2]),o[3]&&(s.className=o[3].replace(/\./g," "+r+i).trim()),e&&Object.keys(e).forEach(function(u){var p=e[u];p!==void 0&&(/^on\w+$/.test(u)?s[u]=p:s.setAttribute(u,p))}),t&&(x(t)?s.innerHTML=t:t.forEach(function(u){return s.appendChild(u)})),s}function ot(n,e){e&&(x(e)?n.innerHTML=e:e.forEach(function(t){return n.appendChild(t)}))}function st(n){if(!n)return null;if(x(n))return document.querySelector(n);if(G(n))return n;throw new Error("The container element you are currently passing in is not an HTML element")}function wt(n){n&&(n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n))}function Ot(n){if(n)for(var e=n.childNodes,t=e.length-1;t>=0;t--)n.removeChild(e[t])}function L(n){n.style.display=""}function P(n){n.style.display="none"}function d(n,e,t){if(e===void 0&&(e=""),t===void 0&&(t=C),e=e.trim(),!e)return n;if(n.classList)e.split(" ").forEach(function(i){return n.classList.add(t+"_"+i)});else{var r=n.className&&n.className.baseVal||"";n.setAttribute("class",(r?r+" ":"")+e.split(" ").map(function(i){return t+i}).join(" "))}return n}function b(n,e,t){return t===void 0&&(t=C),n.classList.remove(t+"_"+e),n}function zt(n,e,t){return t===void 0&&(t=C),n.classList.contains(t+"_"+e)}function Tt(n,e,t,r){return r===void 0&&(r=C),e=r+"_"+e,t?(n.classList.add(e),!0):t===!1?(n.classList.remove(e),!0):n.classList.toggle(e,t)}var lt="http://www.w3.org/2000/svg";function Gt(n,e,t){t===void 0&&(t="0 0 1024 1024");var r=document.createElementNS(lt,"svg");if(r.setAttribute("viewBox",t),d(r,n),e){var i=document.createElementNS(lt,"path");i.setAttributeNS(null,"d",e),r.appendChild(i)}return r}function $t(n){return n.path||n.composedPath()}var Xt=function(){function n(e,t,r,i){this.node=e,this.type=t,this.handler=r,this.options=i,e.addEventListener(t,r,this.options)}return n.prototype.dispose=function(){this.handler&&(this.node.removeEventListener(this.type,this.handler,this.options),this.node=null,this.handler=null,this.options=null)},n}();function ut(n){var e=n.cloneNode(!0);e.style.cssText+=";position:absolute;opacity:0",e.removeAttribute("hidden");var t=n.parentNode||document.body;t.appendChild(e);var r=e.getBoundingClientRect();return t.removeChild(e),{width:r.width,height:r.height}}var H=new Map;function f(n,e){var t;return H.has(n)||H.set(n,[]),(t=H.get(n))===null||t===void 0||t.push(e),e}function B(n){var e;H.has(n)&&((e=H.get(n))===null||e===void 0||e.forEach(function(t){return t.dispose()}),H.delete(n))}function m(n,e,t,r,i){var o=new Xt(e,t,r,i);return n&&f(n,o),o}var g=function(){function n(e,t,r,i,o){t&&!x(t)&&G(t)?this.el=t:this.el=c(t,r,i,o),e&&e.appendChild(this.el)}return n.prototype.injectStyle=function(e){Object.assign(this.el.style,e)},n.prototype.dispose=function(){wt(this.el),B(this)},n}(),Yt="M276.33649907 99.58887373v824.82225254l648.0746272-412.41112627z",Zt="M158.5047493 924.41112627h235.66350093V99.58887373h-235.66350093v824.82225254z m471.32700047-824.82225254v824.82225254h235.66350093V99.58887373h-235.66350093z",qt="M75.09333333 366.36444445v291.2711111h194.18074112l242.72592555 242.72592555V123.6385189L269.27407445 366.36444445H75.09333333z m655.36 145.63555555c0-85.68225223-49.51608889-159.71365888-121.36296334-195.39436999v391.03146666c71.84687445-35.92343666 121.36296334-109.95484445 121.36296334-195.63709667zM609.09036999 86.25872555v100.24580778c140.29558557 41.74885888 242.72592555 171.60723001 242.72592668 325.49546667s-102.43034112 283.74660779-242.72592668 325.49546667v100.24580778c194.42346667-44.1761189 339.81629667-217.72515555 339.81629668-425.74127445S803.51383666 130.43484445 609.09036999 86.25872555z",Kt="M730.45333333 512c0-85.68225223-49.51608889-159.71365888-121.36296334-195.39436999v107.28485888l119.17843001 119.17843001c1.45635555-10.19448889 2.18453333-20.63170333 2.18453333-31.0689189z m121.36296334 0c0 45.63247445-9.95176334 88.59496334-26.2144 128.15928889l73.54595556 73.54595556C930.70222222 653.26648889 948.90666667 584.81777778 948.90666667 512c0-207.77339221-145.39283001-381.56515555-339.81629668-425.74127445v100.24580778c140.29558557 41.74885888 242.72592555 171.60723001 242.72592668 325.49546667zM136.98844445 75.09333333L75.09333333 136.98844445 304.46933333 366.36444445H75.09333333v291.2711111h194.18074112l242.72592555 242.72592555V573.89511111l206.55976334 206.55976334c-32.52527445 25.00076999-69.17688889 45.14702222-109.46939335 57.28331776v100.24580779a435.45031111 435.45031111 0 0 0 178.88900779-87.86678557L887.01155555 948.90666667 948.90666667 887.01155555l-436.90666667-436.90666666L136.98844445 75.09333333zM512 123.6385189l-101.45943666 101.45943665L512 326.55739221V123.6385189z",Jt="M850.1475552 556.37333333c1.8204448-14.5635552 3.18577813-29.35466667 3.18577813-44.37333333s-1.36533333-29.80977813-3.18577813-44.37333333l96.256-75.32088854c8.64711147-6.82666667 11.15022187-19.11466667 5.46133333-29.12711146l-91.02222186-157.696c-5.68888853-9.78488853-17.52177813-13.88088853-27.76177814-9.78488854l-113.32266666 45.73866667c-23.43822187-17.97688852-49.15200001-33.22311147-76.91377707-44.8284448L625.77777813 76.0035552c-2.048-10.69511147-11.37777813-19.11466667-22.75555626-19.11466667h-182.04444374c-11.37777813 0-20.7075552 8.4195552-22.528 19.11466667l-17.06666666 120.6044448a336.78222187 336.78222187 0 0 0-76.91377814 44.8284448L191.14666667 195.69777813a22.7555552 22.7555552 0 0 0-27.76177814 9.78488854l-91.02222186 157.696c-5.68888853 9.78488853-3.18577813 22.07288853 5.46133333 29.12711146l96.0284448 75.32088854C172.032 482.19022187 170.66666667 496.98133333 170.66666667 512s1.36533333 29.80977813 3.18577813 44.37333333l-96.0284448 75.32088854c-8.64711147 6.82666667-11.15022187 19.11466667-5.46133333 29.12711146l91.02222186 157.696c5.68888853 9.78488853 17.52177813 13.88088853 27.76177814 9.78488854l113.32266666-45.73866667c23.43822187 17.97688852 49.15200001 33.22311147 76.91377814 44.8284448l17.06666666 120.6044448c1.8204448 10.69511147 11.15022187 19.11466667 22.528 19.11466667h182.04444374c11.37777813 0 20.7075552-8.4195552 22.528-19.11466667l17.06666666-120.6044448a336.78222187 336.78222187 0 0 0 76.91377814-44.8284448l113.32266666 45.73866667a22.7555552 22.7555552 0 0 0 27.76177814-9.78488854l91.02222186-157.696c5.68888853-9.78488853 3.18577813-22.07288853-5.46133333-29.12711146l-96.0284448-75.32088854zM512 671.28888853c-88.064 0-159.28888853-71.22488853-159.28888853-159.28888853s71.22488853-159.28888853 159.28888853-159.28888853 159.28888853 71.22488853 159.28888853 159.28888853-71.22488853 159.28888853-159.28888853 159.28888853z",Qt="M254.95894292 769.04105708L254.95894292 504.91783181l-117.89727625-9.6e-7L137.06166667 886.93833333l382.02050248 0L519.08216819 769.04105708 254.95894292 769.04105708z m514.08211416-514.08211416L769.04105708 519.08216819l117.89727625 9.6e-7L886.93833333 137.06166667l-382.02050248 0L504.91783181 254.95894292 769.04105708 254.95894292z",te="M128.57154667 580.65325902L128.57154748 677.79762115 346.20237885 677.79762115 346.20237885 895.42845252l97.14436213 8.1e-7L443.34674098 580.65325902l-314.77519431 0z m766.85690666-137.30651804L895.42845252 346.20237885 677.79762115 346.20237885 677.79762115 128.57154748l-97.14436213-8.1e-7L580.65325902 443.34674098l314.77519431 0z",ee="M217.42062487 629.83174977h-117.83175114v294.5793765h294.5793765v-117.83175114h-176.74762536v-176.74762536z m-117.83175114-235.66349954h117.83175114v-176.74762536h176.74762536v-117.83175114H99.58887373v294.5793765z m706.9905014 412.4111249h-176.74762536v117.83175114h294.5793765V629.83174977h-117.83175114v176.74762536z m-176.74762536-706.9905014v117.83175114h176.74762536v176.74762536h117.83175114V99.58887373H629.83174977z",ne="M125.36456912 732.93453212h165.70089876v165.70089876h110.46726671V622.46726541H125.36456912v110.46726671z m165.70089876-441.86906424h-165.70089876v110.46726671h276.16816547V125.36456912h-110.46726671v165.70089876z m331.40179753 607.569963h110.46726671v-165.70089876h165.70089876v-110.46726671H622.46726541v276.16816547z m110.46726671-607.569963v-165.70089876h-110.46726671v276.16816547h276.16816547v-110.46726671h-165.70089876z";function I(n){return function(e){var t=Gt("icon",n);return e&&d(t,e),t}}var T=Object.create(null);function D(n,e){T[n]=e}Object.defineProperty(T,"register",{value:D});D("play",I(Yt));D("pause",I(Zt));D("volume",I(qt));D("muted",I(Kt));D("settings",I(Jt));D("webEnterFullscreen",I(Qt));D("webExitFullscreen",I(te));D("enterFullscreen",I(ee));D("exitFullscreen",I(ne));var Ct=typeof window<"u",V=Ct&&/(iPad|iPhone|iPod)/gi.test(navigator.platform),z=function(){return z=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},z.apply(this,arguments)},_,Y=Object.create(null),v={currentLang:"",defaultLang:"",trans:function(n,e){var t;return((t=Y[e||this.currentLang||this.defaultLang])===null||t===void 0?void 0:t[n])||n},add:function(n,e){Y[n.toLowerCase()]=z(z({},Y[n.toLowerCase()]),e)},setCurrentLang:function(n){this.currentLang=n||navigator.language||navigator.browserLanguage||navigator.userLanguage,this.currentLang&&(this.currentLang=this.currentLang.toLowerCase())},setDefaultLang:function(n){this.defaultLang=(n||"").toLowerCase()}},Lt="Play",Pt="Pause",St="Mirroring",bt="Speed",At="Normal",xt="Web fullscreen",Dt="Exit web fullscreen",It="Fullscreen",jt="Exit fullscreen",Nt="Loop",Rt="Forward",Ft="Rewind",q="Second",K="Seconds";v.add("zh-cn",(_={},_[Lt]="播放",_[Pt]="暂停",_[St]="镜像",_[bt]="播放速度",_[At]="正常",_[xt]="网页全屏",_[Dt]="退出网页全屏",_[It]="全屏",_[jt]="退出全屏",_[Nt]="循环播放",_[Rt]="快进",_[Ft]="快退",_[q]="秒",_[K]="秒",_));Ct&&v.setCurrentLang();var re=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ie=function(n){re(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.id="play",t.onPlay=function(){L(t.pauseIcon),P(t.playIcon),t.tooltip.html=v.trans(Pt)},t.onPause=function(){L(t.playIcon),P(t.pauseIcon),t.tooltip.html=v.trans(Lt)},t}return e.prototype.init=function(t,r){this.tooltip=r,this.playIcon=this.el.appendChild(T.play()),this.pauseIcon=this.el.appendChild(T.pause()),t.paused?this.onPause():this.onPlay(),f(this,t.on(l.PLAY,this.onPlay)),f(this,t.on(l.PAUSE,this.onPause)),m(this,this.el,"click",t.toggle)},e}(g),oe=function(){return new ie};function S(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),Math.max(Math.min(n,t),e)}function tt(n,e){var t=!1,r=!0,i=null;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(i=o,r)return r=!1,n.apply(e,i);t||(t=!0,requestAnimationFrame(function(){n.apply(e,i),t=!1}))}}function M(n,e,t){if(e===void 0&&(e=2),t===void 0&&(t="0"),n=String(n),n.length>=2)return n;for(var r=0,i=e-n.length;r<i;r++)n=t+n;return n}function J(n){if(!Number.isFinite(n))return"-";if(n<=0)return"00:00";if(n=Math.round(n),n<60)return"00:"+M(n);if(n>=60&&n<3600){var e=Math.floor(n/60),t=Math.floor(n%60);return M(e)+":"+M(t)}var r=Math.floor(n/3600),i=Math.floor(n/3600/60),o=Math.floor(n/3600%60);return M(r)+":"+M(i)+":"+M(o)}function se(n,e){for(var t=[],r=0;r<e;++r)t.push(n);return t.join("")}var le=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ue=function(n){le(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.id="time",t}return e.prototype.init=function(t){var r=this;d(this.el,"controller_time"),this.playedText=this.el.appendChild(c("span")),this.slashText=this.el.appendChild(c("span")),this.totalText=this.el.appendChild(c("span")),this.played=t.currentTime,this.total=t.duration,f(this,t.on(l.TIME_UPDATE,function(){r.played=t.currentTime})),this.slash=" / ",f(this,t.on(l.DURATION_CHANGE,function(){r.total=t.duration}))},Object.defineProperty(e.prototype,"played",{set:function(t){this.playedText.textContent=J(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"slash",{set:function(t){this.slashText.textContent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"total",{set:function(t){this.totalText.textContent=J(t)},enumerable:!1,configurable:!0}),e}(g),ae=function(){return new ue},Mt=function(){function n(e,t,r,i){var o=this;this.el=e,this.pending=!1,this.downHandler=function(s){s.preventDefault(),o.el.setPointerCapture(s.pointerId),o.el.addEventListener("pointermove",o.moveHandler),o.start(s)},this.upHandler=function(s){s.preventDefault(),o.el.releasePointerCapture(s.pointerId),o.el.removeEventListener("pointermove",o.moveHandler),o.end&&o.end(s)},this.moveHandler=function(s){s.preventDefault(),o.lastEv=s,!o.pending&&(o.pending=!0,requestAnimationFrame(o.handlerMove))},this.handlerMove=function(){o.move(o.lastEv),o.pending=!1},this.start=t,this.move=r,this.end=i,this.el.addEventListener("pointerdown",this.downHandler),this.el.addEventListener("pointerup",this.upHandler),this.el.addEventListener("pointercancel",this.upHandler)}return n.prototype.dispose=function(){this.el&&(this.el.removeEventListener("pointerdown",this.downHandler),this.el.removeEventListener("pointerup",this.upHandler),this.el.removeEventListener("pointercancel",this.upHandler),this.el.removeEventListener("pointermove",this.moveHandler),this.start=null,this.move=null,this.end=null,this.lastEv=null,this.el=null)},n}(),k=function(){function n(e,t){var r=this;this.el=e,this.player=t,this.update=function(){r.rect=r.el.getBoundingClientRect()},this.rect={},t&&t.on(l.UPDATE_SIZE,this.update)}return Object.defineProperty(n.prototype,"width",{get:function(){return this.tryUpdate(this.rect.width),this.rect.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.tryUpdate(this.rect.height),this.rect.height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this.tryUpdate(this.rect.left),this.rect.left},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.tryUpdate(this.rect.top),this.rect.top},enumerable:!1,configurable:!0}),n.prototype.tryUpdate=function(e){e||this.update()},n.prototype.dispose=function(){this.player&&this.player.off(l.UPDATE_SIZE,this.update),this.el=null,this.rect=null},n}(),ce=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fe={startSecond:0,gapSecond:5,col:5,row:5,width:160,height:90,images:[]},pe=function(n){ce(e,n);function e(t,r){var i=n.call(this,t,"div.progress_thumb")||this;return i.opts=fe,i.updateOptions(r),i.timeTagEl=i.el.appendChild(c("div.progress_thumb_time")),i.timeTagEl.textContent="0:00",i.rect=f(i,new k(i.el)),i}return e.prototype.getCurrentThumb=function(t){var r=Math.floor((t-this.opts.startSecond)/((this.onePreImgNums||1)*this.opts.gapSecond)),i=Math.floor((t-this.opts.startSecond)%((this.onePreImgNums||1)*this.opts.gapSecond)/this.opts.gapSecond),o=this.opts.images[r];if(o){var s=i%this.opts.col%this.opts.col*this.opts.width,u=Math.floor(i/this.opts.col)%this.opts.row*this.opts.height;return{url:o,x:s,y:u}}},e.prototype.updateOptions=function(t){Object.assign(this.opts,t),this.opts.images.length&&(this.preImgEl||(this.preImgEl=this.el.appendChild(c("div.progress_thumb_img"))),this.preImgEl.style.cssText+=";width:"+this.opts.width+"px;height:"+this.opts.height+"px",this.onePreImgNums=this.opts.row*this.opts.col)},e.prototype.updatePos=function(t,r,i){if(this.timeTagEl.textContent=J(t),this.preImgEl){var o=this.getCurrentThumb(t);o&&(this.preImgEl.style.cssText+=";background-image:url("+o.url+");background-position:-"+o.x+"px -"+o.y+"px")}else this.rect.update();var s=this.rect.width/2;this.injectStyle({left:S(r-s,0,Math.max(0,i-2*s))+"px"})},e}(g),he=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),de=function(n){he(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.id="progress",t.dragging=!1,t.onDragStart=function(r){t.dragging=!0,t.rect.update(),t.onDragging(r)},t.onDragging=function(r){var i=r.pageX-t.rect.x;t.setPlayedBarLength(i/t.rect.width),t.updateHoverElement(r.pageX)},t.onDragEnd=function(r){t.dragging=!1,t.player.seek(t.getCurrentTime(r.pageX))},t.updatePlayedBar=function(){t.dragging||t.setPlayedBarLength(t.player.currentTime/t.player.duration)},t.updateBuffBar=function(){var r=t.player.buffered.length;if(!r)return t.setBuffBarLength(0);var i=t.player.currentTime,o=0;t.player.eachBuffer(function(s,u){if(s<=i&&u>=i)return o=u/t.player.duration,!0}),t.setBuffBarLength(o)},t}return e.prototype.init=function(t){var r=this,i,o;this.player=t,d(this.el,"progress"),this.bars=this.el.appendChild(c("div.progress_bars")),this.buffBar=this.bars.appendChild(c("div.progress_buff")),this.playedBar=this.bars.appendChild(c("div.progress_played")),this.dot=this.el.appendChild(c("div.progress_dot")),this.dot.appendChild(((i=t.options.progressOptions)===null||i===void 0?void 0:i.dot)||c("div.progress_dot_inner")),this.indicator=this.el.appendChild(c("div.progress_indicator")),!((o=t.options.progressOptions)===null||o===void 0)&&o.indicator&&this.indicator.appendChild(c("div.progress_indicator_inner")),this.rect=f(this,new k(this.bars,t)),this.thumbnail=f(this,new pe(this.el,t.options.thumbnail)),f(this,new Mt(this.el,this.onDragStart,this.onDragging,this.onDragEnd)),f(this,t.on(l.TIME_UPDATE,this.updatePlayedBar)),f(this,t.on(l.PROGRESS,this.updateBuffBar)),f(this,t.on(l.UPDATE_SIZE,function(){t.playing||r.resetPlayedBar()})),m(this,this.el,"mousemove",tt(function(s){return r.updateHoverElement(s.pageX)}))},e.prototype.resetPlayedBar=function(){this.setPlayedBarLength(this.player.currentTime/this.player.duration)},e.prototype.setPlayedBarLength=function(t){this.playedBar.style.transform="scaleX("+S(t)+")",this.dot.style.left=S(t*this.rect.width,0,this.rect.width||0)+"px"},e.prototype.setBuffBarLength=function(t){this.buffBar.style.transform="scaleX("+S(t)+")"},e.prototype.updateHoverElement=function(t){this.thumbnail.updatePos(this.getCurrentTime(t),t-this.rect.x,this.rect.width),this.indicator&&(this.indicator.style.left=S(t-this.rect.x,0,this.rect.width||0)+"px")},e.prototype.getCurrentTime=function(t){return S((t-this.rect.x)/this.rect.width)*this.player.duration},e}(g),ve=function(){return new de},ge=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ye=function(n){ge(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.id="volume",t.onDragStart=function(r){t.rect.update(),t.onDragging(r)},t.onDragging=function(r){var i=t.rect.height-(r.y-t.rect.y),o=S(i/t.rect.height);t.player.volume=o},t.onVolumeChange=function(){t.player.muted?t.mute():t.unmute(),t.percent.innerHTML=Math.floor(t.player.volume*100).toString(),t.percentage.style.transform="scaleY("+t.player.volume+")",t.dot.style.bottom=S(t.player.volume*t.rect.height,0,t.rect.height||0)+"px"},t.hideBarsById=function(r){r!==t.id&&t.hideBars()},t}return e.prototype.init=function(t){var r=this;this.player=t,d(this.el,"controller_volume"),this.volumeIcon=this.el.appendChild(T.volume()),this.mutedIcon=this.el.appendChild(T.muted()),this.stuffing=this.el.appendChild(c("div.controller_volume_stuffing")),this.bars=this.el.appendChild(c("div.controller_volume_bars")),this.percent=this.bars.appendChild(c("span.controller_volume_percent")),this.barWrapper=this.bars.appendChild(c("div.controller_volume_bar_wrapper"));var i=this.barWrapper.appendChild(c("div.controller_volume_bar"));i.appendChild(c("div.controller_volume_bar_bg")),this.percentage=i.appendChild(c("div.controller_volume_bar_percentage")),this.dot=i.appendChild(c("div.controller_volume_bar_dot")),this.dot.appendChild(c("div.controller_volume_bar_dot_inner")),this.rect=new k(this.barWrapper,t),f(this,t.on(l.VOLUME_CHANGE,this.onVolumeChange)),f(this,new Mt(this.barWrapper,this.onDragStart,this.onDragging)),m(this,this.el,"click",function(o){var s=$t(o);s.includes(r.bars)||s.includes(r.stuffing)||t.toggleVolume()}),m(this,this.el,"mouseenter",function(){r.showBars()}),m(this,this.el,"mouseleave",function(){r.tryHideBars()}),f(this,t.on(l.POPOVER_SHOW_CHANGE,this.hideBarsById)),this.onVolumeChange()},e.prototype.mute=function(){L(this.mutedIcon),P(this.volumeIcon)},e.prototype.unmute=function(){L(this.volumeIcon),P(this.mutedIcon)},e.prototype.showBars=function(){this.player.emit(l.POPOVER_SHOW_CHANGE,this.id),this.stuffing.style.display="block",this.bars.style.display="block",this.onVolumeChange(),this.barsTimer&&clearTimeout(this.barsTimer)},e.prototype.tryHideBars=function(){var t=this;this.barsTimer&&clearTimeout(this.barsTimer),this.barsTimer=setTimeout(function(){t.hideBars()},$.POPOVER_HIDE)},e.prototype.hideBars=function(){this.stuffing.style.display="none",this.bars.style.display="none"},e}(g),_e=function(){return new ye},me=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),at="popover_active",Ee=function(n){me(e,n);function e(t,r,i){var o=n.call(this,t,".popover")||this;return o.panelEl=o.el.appendChild(c("div.popover_panel")),r&&o.injectPanelStyle(r),i&&d(o.panelEl,"popover_panel_left"),o}return e.prototype.injectPanelStyle=function(t){Object.assign(this.panelEl.style,t)},e.prototype.show=function(){d(this.el,at)},e.prototype.hide=function(){b(this.el,at)},e}(g),we=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oe="switch_active",Te=function(n){we(e,n);function e(t,r){var i=n.call(this,t,".switch")||this;return i.toggle(r||!1),i}return e.prototype.toggle=function(t){Tt(this.el,Oe,t)},e}(g),Ce=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ct="controller_settings_active",ft="controller_settings_option_active",Le=function(n){Ce(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.id="settings",t.onItemClick=function(r){return function(){var i;r.type==="switch"&&(r.checked=!r.checked,(i=r._switch)===null||i===void 0||i.toggle(r.checked),r.change&&r.change(r.checked,t.player,r)),r.type==="select"&&(t.renderOptions(),t.showOptionPage(r._optionEl))}},t.onOptionClick=function(r,i){return function(){r.value!==i.value&&(r.value=i.value,r.change&&r.change(i.value,t.player,r)),t.hide(),t.renderHome(),t.showHomePage(r._optionEl)}},t.show=function(){if(t.player.emit(l.POPOVER_SHOW_CHANGE,t.id),t.popoverTimer){t.cleatTimeout();return}t.renderHome(),t.stuffing.style.display="block",t.popover.show(),t.homeEl.style.display="block",d(t.el,ct)},t.hide=function(){t.cleatTimeout(),t.stuffing.style.display="none",t.popover.hide(),t.homeEl.style.display="none",b(t.el,ct),t.currentOptionEl&&setTimeout(function(){return t.showHomePage(t.currentOptionEl)},200)},t.cleatTimeout=function(){t.popoverTimer&&clearTimeout(t.popoverTimer),t.popoverTimer=null},t.hideById=function(r){r!==t.id&&t.hide()},t}return e.prototype.init=function(t){var r=this;this.player=t,d(this.el,"controller_settings"),this.items=t.settingItems,this.el.appendChild(T.settings()),this.stuffing=this.el.appendChild(c("div.controller_settings_stuffing")),this.popover=new Ee(this.el,{willChange:"width, height"}),this.homeEl=this.popover.panelEl.appendChild(c("div")),m(this,this.el,"mouseenter",function(){r.show()}),m(this,this.el,"mouseleave",function(){r.tryHide()}),f(this,t.on(l.MOUNTED,function(){return r.showHomePage()})),f(this,t.on(l.POPOVER_SHOW_CHANGE,this.hideById)),this.items.forEach(function(i){return i.init&&i.init(t,i)}),this.renderHome()},e.prototype.renderHome=function(){var t=this;this.items.forEach(function(r){var i=!r._switch&&!r._selectedEl&&!r._optionEl?c("div.controller_settings_item"):null;if(i&&(i.appendChild(c(void 0,void 0,r.html)),r.type!=="switch"&&i.appendChild(c("div.spacer"))),r.type==="switch"&&(r._switch||(r._switch=new Te(i,r.checked))),r.type==="select"){if(!r.options||!r.options.length)return;r._selectedEl||(d(i,"controller_settings_item_select"),r._selectedEl=i.appendChild(c("div",{"data-selected":!0})));var o=r.options.find(function(s){return s.value===r.value});if(!o)return;r._selectedEl.innerHTML=o.selectedText||o.html||""}r._optionEl&&(r._optionEl.style.display="none"),i&&(i.addEventListener("click",t.onItemClick(r)),t.homeEl.appendChild(i))})},e.prototype.renderOptions=function(){var t=this;this.items.forEach(function(r){var i;r.type==="select"&&(r._optionEl||(r._optionEl=t.popover.panelEl.appendChild(c("div"))),!r._optionEls&&r.options&&(r._optionEls=r.options.map(function(o){var s=r._optionEl.appendChild(c("div.controller_settings_option",void 0,o.html));return s.addEventListener("click",t.onOptionClick(r,o)),s})),(i=r._optionEls)===null||i===void 0||i.forEach(function(o,s){b(o,ft),r.value===r.options[s].value&&d(o,ft)}),r._optionEl.style.display="none")})},e.prototype.showHomePage=function(t){t&&(t.style.display="none"),this.homeEl.style.display="";var r=ut(this.homeEl),i=r.width,o=r.height;this.popover.injectPanelStyle({width:i+"px",height:o+10+"px"})},e.prototype.showOptionPage=function(t){this.homeEl.style.display="none",t.style.display="";var r=ut(t),i=r.width,o=r.height;this.popover.injectPanelStyle({width:i+"px",height:o+10+"px"}),this.currentOptionEl=t},e.prototype.tryHide=function(){var t=this;this.popoverTimer=setTimeout(function(){t.hide()},$.POPOVER_HIDE)},e}(g),Pe=function(){return new Le},pt="video_mirroring",Se=function(){return{id:"mirroring",type:"switch",html:v.trans(St),checked:!1,init:function(n){b(n.video,pt)},change:function(n,e){Tt(e.video,pt,n)}}},be=function(){return{id:"speed",type:"select",html:v.trans(bt),value:1,options:[{value:.25,html:"0.25"},{value:.5,html:"0.5"},{value:1,html:v.trans(At)},{value:1.5,html:"1.5"},{value:2,html:"2"}],init:function(n){n.playbackRate=1},change:function(n,e){e.playbackRate=n,this.value=n}}},Ae=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xe=function(n){Ae(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.id="web-fullscreen",t.enter=function(){L(t.exitIcon),P(t.enterIcon),t.tooltip.html=v.trans(Dt)},t.exit=function(){P(t.exitIcon),L(t.enterIcon),t.tooltip.html=v.trans(xt)},t}return e.prototype.init=function(t,r){this.tooltip=r,this.enterIcon=this.el.appendChild(T.webEnterFullscreen()),this.exitIcon=this.el.appendChild(T.webExitFullscreen()),t.webFullscreen.isActive?this.enter():this.exit(),f(this,t.on(l.WEB_ENTER_FULLSCREEN,this.enter)),f(this,t.on(l.WEB_EXIT_FULLSCREEN,this.exit)),m(this,this.el,"click",t.webFullscreen.toggle)},e}(g),De=function(){return new xe},Ie=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),je=function(n){Ie(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.id="fullscreen",t.enter=function(){L(t.exitIcon),P(t.enterIcon),t.tooltip.html=v.trans(jt),t.mounted&&t.player.updateControllerEles(t.player.options.controller.eles.filter(function(r){return r!=="web-fullscreen"}),"eles")},t.exit=function(){P(t.exitIcon),L(t.enterIcon),t.tooltip.html=v.trans(It),t.mounted&&t.player.updateControllerEles(t.player.options.controller.eles,"eles")},t}return e.prototype.init=function(t,r){this.player=t,this.tooltip=r,this.enterIcon=this.el.appendChild(T.enterFullscreen()),this.exitIcon=this.el.appendChild(T.exitFullscreen()),t.fullscreen.isActive?this.enter():this.exit(),f(this,t.on(l.ENTER_FULLSCREEN,this.enter)),f(this,t.on(l.EXIT_FULLSCREEN,this.exit)),m(this,this.el,"click",function(){return t.fullscreen.toggle(!0)})},e}(g),Ne=function(){return new je},Re=function(){return{id:"loop",html:v.trans(Nt),show:function(n,e){e.checked=n.loop},click:function(n,e){n.loop=!n.loop,e.checked=n.loop}}};function Fe(n,e){e&&Object.keys(e).forEach(function(t){n.setAttribute(t,e[t])})}function Me(n,e){var t,r,i,o=n.style;e.themeColor&&o.setProperty("--theme-color",e.themeColor),!((t=e.posterOptions)===null||t===void 0)&&t.bgColor&&o.setProperty("--poster-bg",e.posterOptions.bgColor),!((r=e.progressOptions)===null||r===void 0)&&r.playedBg&&o.setProperty("--progress-played-bg",e.progressOptions.playedBg),!((i=e.progressOptions)===null||i===void 0)&&i.buffBg&&o.setProperty("--progress-buff-bg",e.progressOptions.buffBg)}function He(n){n.registerControllerEle(oe()),n.registerControllerEle(ae()),n.registerControllerEle(_e()),n.registerControllerEle(Pe()),n.registerSettingItem(Se()),n.registerSettingItem(be()),n.registerControllerEle(De()),n.registerControllerEle(Ne()),n.registerControllerEle(ve()),n.registerMenuItem(Re())}function O(n,e,t){var r=function(i){return n.emit(t,i)};return n.video.addEventListener(e,r),{dispose:function(){return n.video.removeEventListener(e,r)}}}function W(n,e,t,r){r===void 0&&(r=n.video);var i=function(o){return n.emit(t,o)};return r.addEventListener(e,tt(i)),{dispose:function(){return r.removeEventListener(e,i)}}}function Be(n){var e=function(r){return f(n,r)};if(e(O(n,"play",l.PLAY)),e(O(n,"pause",l.PAUSE)),e(O(n,"ended",l.ENDED)),e(O(n,"durationchange",l.DURATION_CHANGE)),e(O(n,"waiting",l.WAITING)),e(O(n,"stalled",l.STALLED)),e(O(n,"canplay",l.CANPLAY)),e(O(n,"loadedmetadata",l.LOADED_METADATA)),e(O(n,"ratechange",l.RATE_CHANGE)),e(O(n,"error",l.ERROR)),e(O(n,"seeked",l.SEEKED)),e(O(n,"enterpictureinpicture",l.ENTER_PIP)),e(O(n,"leavepictureinpicture",l.EXIT_PIP)),e(W(n,"timeupdate",l.TIME_UPDATE)),e(W(n,"progress",l.PROGRESS)),e(W(n,"volumechange",l.VOLUME_CHANGE)),e(W(n,"resize",l.UPDATE_SIZE,window)),window.ResizeObserver){var t=new window.ResizeObserver(tt(function(){return n.emit(l.UPDATE_SIZE)}));t.observe(n.el),e({dispose:function(){return t.disconnect()}})}n.on(l.LOADED_METADATA,function(){n.video.paused?n.emit(l.PAUSE):n.emit(l.PLAY)})}var ke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ht="tooltip-left",dt="tooltip-right",vt="tooltip-bottom",gt=function(n){ke(e,n);function e(t,r){var i=this;return d(t,"tooltip"),i=n.call(this,t,"div.tooltip_content")||this,r&&(i.html=r),i}return Object.defineProperty(e.prototype,"html",{get:function(){return this.el.innerHTML},set:function(t){this.el.innerHTML=t},enumerable:!1,configurable:!0}),e.prototype.resetPos=function(){b(this.el,ht),b(this.el,dt),b(this.el,vt)},e.prototype.setBottom=function(){d(this.el,vt)},e.prototype.setLeft=function(){d(this.el,ht)},e.prototype.setRight=function(){d(this.el,dt)},e.prototype.hide=function(){P(this.el)},e.prototype.show=function(){L(this.el)},e}(g);function N(n,e){return!n||!e?!1:n===e||n.id===e.id}function Ue(n,e){return n.findIndex(function(t){return t&&N(t,e)})}function Ve(n,e,t,r){r===void 0&&(r={});for(var i=0,o=n.length-1,s=0,u=e.length-1,p=n[i],a=n[o],h=e[s],y=e[u];N(p,h);)p=n[++i],h=e[++s];for(;N(a,y);)a=n[--o],y=e[--u];for(;i<=o&&s<=u;)if(p===null)p=n[++i];else if(a===null)a=n[--o];else if(h===null)h=n[++s];else if(y===null)y=n[--u];else if(N(p,h))p=n[++i],h=e[++s];else if(N(p,y))t.insertBefore(p.el,a.el),t.insertBefore(p.el,a.el.nextSibling),p=n[++i],y=e[--u];else if(N(a,h))t.insertBefore(a.el,p.el),a=n[--o],h=e[++s];else if(N(a,y))a=n[--o],y=e[--u];else{var A=Ue(n,h);if(A===-1)r.mount&&r.mount(h),t.insertBefore(h.el,p.el);else{var R=n[A];t.insertBefore(R.el,p.el),n[A]=null}h=e[++s]}if(i<=o)for(var w=i;w<=o;w++)r.unmount&&r.unmount(n[w]),n[w]&&t.removeChild(n[w].el);else if(s<=u)for(var U=e[u+1]?e[u+1].el:null,w=s;w<=u;w++)r.mount&&r.mount(e[w]),t.insertBefore(e[w].el,U)}var We=function(){return{id:"spacer",el:c("div.spacer")}},ze=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yt=function(n){ze(e,n);function e(t,r,i){var o=n.call(this,r,"div.controller_ele")||this;if(o.player=t,o.controllerEles=[],o.spacer=We(),o.initControllerEle=function(u){if(u=o.getControllerEle(u),u){if(u.el||(u.el=c("div")),u.mounted){u.tooltip&&u.tooltip.resetPos();return}var p=void 0;return u.tip&&(p=new gt(u.el,u.tip)),u.init&&(u.init.length>=2&&!p&&(p=new gt(u.el)),u.init(o.player,p)),u.dispose&&f(o,u),u.mounted=!0,u}},o.onHideControllerEle=function(u){u&&u.hide&&u.hide()},i){var s=document.createDocumentFragment();i.forEach(function(u){u=o.initControllerEle(u),u&&(s.appendChild(u.el),o.controllerEles.push(u))}),o.updateTooltipPos(),o.el.appendChild(s)}return o}return e.prototype.getControllerEle=function(t){return t==="spacer"?this.spacer:(x(t)&&(t=this.player.getControllerEle(t)),t)},e.prototype.updateTooltipPos=function(){var t=this.controllerEles.length-1;this.controllerEles.forEach(function(r,i){r.tooltip&&(r.tooltip.resetPos(),i===0?r.tooltip.setLeft():i===t&&r.tooltip.setRight())})},e.prototype.update=function(t){var r=this;if(t){var i=[],o=!1;t.forEach(function(s,u){s=r.getControllerEle(s),(!r.controllerEles[u]||r.controllerEles[u].id!==s.id)&&(o=!0),s&&i.push(s)}),o&&(Ve(this.controllerEles,i,this.el,{mount:this.initControllerEle,unmount:this.onHideControllerEle}),this.controllerEles=i,this.updateTooltipPos(),this.player.emit(l.CONTROLLER_ELES_UPDATE))}},e}(g),Ge=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_t="controller_hide",mt="controller_gradient_bottom_hide",$e=function(n){Ge(e,n);function e(t,r){var i=n.call(this,r,"div.controller")||this;return i.player=t,i.show=function(){b(i.el,_t),b(i.gradientBottom,mt),i.player.el.style.cursor="",i.player.emit(l.CONTROLLER_SHOW)},i.hide=function(){d(i.el,_t),d(i.gradientBottom,mt),i.player.el.style.cursor="none",i.player.emit(l.CONTROLLER_HIDE)},i.showThenFade=function(){i.show(),clearTimeout(i.showTimer),i.showTimer=setTimeout(i.tryHide,$.CONTROLLER_BAR_HIDE)},i.tryHide=function(){i.player.video.played.length&&!i.player.paused&&i.hide()},i.gradientBottom=r.appendChild(c("div.controller_gradient_bottom")),i.controllerEles={progress:f(i,new yt(t,i.el,t.options.controller.progress)),eles:f(i,new yt(t,i.el,t.options.controller.eles))},f(i,t.on(l.PAUSE,function(){i.show()})),f(i,t.on(l.PLAY,function(){i.showThenFade()})),m(i,t.el,"mousemove",i.showThenFade),m(i,t.el,"mouseleave",i.tryHide),i.showThenFade(),i}return e.prototype.updateEles=function(t,r){var i=this.controllerEles[r];i&&i.update(t||[])},e}(g),Z="web_fullscreen",Xe=function(){function n(e){var t=this;this.toggle=function(){t.isActive?t.exit():t.enter()},this.player=e}return Object.defineProperty(n.prototype,"isActive",{get:function(){return zt(this.player.el,Z)},enumerable:!1,configurable:!0}),n.prototype.enter=function(){d(this.player.el,Z),this.player.emit(l.WEB_ENTER_FULLSCREEN),this.player.emit(l.UPDATE_SIZE)},n.prototype.exit=function(){return this.isActive?(b(this.player.el,Z),this.player.emit(l.WEB_EXIT_FULLSCREEN),this.player.emit(l.UPDATE_SIZE),!0):!1},n.prototype.dispose=function(){this.player&&(this.player.off(l.WEB_ENTER_FULLSCREEN),this.player.off(l.WEB_EXIT_FULLSCREEN),this.player=null)},n}(),Et="fullscreen",Ye=function(){function n(e){var t=this;this.prefix=this.getPrefix(),this.tryToggle=function(){t.toggle()},this.toggle=function(r){t.player.clearToggleDelay(r),t.isActive?t.exit():t.enter()},this.player=e,m(this,document,this.prefix==="ms"?"MSFullscreenChange":this.prefix+"fullscreenchange",function(){var r="";t.isActive?(t.addClass(),r=l.ENTER_FULLSCREEN):(t.removeClass(),r=l.EXIT_FULLSCREEN),t.player.emit(r),t.player.emit(l.UPDATE_SIZE)}),this.setTarget(),this.isActive&&this.addClass(),this.enableDblclick()}return n.prototype.getPrefix=function(){if(X(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].forEach(function(t){(X(document[t+"ExitFullscreen"])||X(document[t+"CancelFullScreen"]))&&(e=t)}),e},Object.defineProperty(n.prototype,"requestFullscreen",{get:function(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exitFullscreen",{get:function(){return HTMLDocument.prototype.exitFullscreen||HTMLDocument.prototype.webkitExitFullscreen||HTMLDocument.prototype.cancelFullScreen||HTMLDocument.prototype.mozCancelFullScreen||HTMLDocument.prototype.msExitFullscreen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fullscreenElement",{get:function(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isActive",{get:function(){return this.fullscreenElement===this.target},enumerable:!1,configurable:!0}),n.prototype.addClass=function(){d(this.player.el,Et)},n.prototype.removeClass=function(){b(this.player.el,Et)},n.prototype.enableDblclick=function(){this.player.video.addEventListener("dblclick",this.tryToggle)},n.prototype.disableDblclick=function(){this.player.video.removeEventListener("dblclick",this.tryToggle)},n.prototype.setTarget=function(e,t){this.target=(e&&V?t:e)||(V?this.player.video:this.player.el),this.isActive&&this.enter()},n.prototype.enter=function(){V?this.target.webkitEnterFullscreen():(this.requestFullscreen.call(this.target,{navigationUI:"hide"}),this.player.emit(l.UPDATE_SIZE))},n.prototype.exit=function(){return this.isActive?(V?this.target.webkitExitFullscreen():(this.exitFullscreen.call(document),this.player.emit(l.UPDATE_SIZE)),!0):!1},n.prototype.dispose=function(){this.player&&(this.player.off(l.ENTER_FULLSCREEN),this.player.off(l.EXIT_FULLSCREEN),this.disableDblclick(),this.player=null,B(this))},n}(),Ze=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qe=function(n){Ze(e,n);function e(t,r){var i=n.call(this,t,".poster")||this;i.player=r,i.tryHide=function(){i.hide()};var o=r.options.posterOptions;if(i.url=o==null?void 0:o.url,i.hide(),o!=null&&o.disabled)return i;if(i.show(),i.url){var s=c("img.poster_img");s.src=i.url,o!=null&&o.autoFill&&d(s,"poster_img_fill"),i.el.appendChild(s)}return m(i,i.el,"click",function(){r.loaded?i.hide():r.loading.show(),r.play()}),f(i,r.on(l.CANPLAY,i.tryHide)),f(i,r.on(l.LOADED_METADATA,i.tryHide)),i}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this.el.style.display!=="none"},enumerable:!1,configurable:!0}),e.prototype.show=function(){L(this.el)},e.prototype.hide=function(){P(this.el)},e}(g),Ke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Je=function(n){Ke(e,n);function e(t,r){var i=n.call(this,t,".loading")||this;return i.player=r,i.startWaitingTime=0,i._checkCanplay=function(){i.startWaitingTime!==i.player.currentTime&&(i.hide(),i.clearTimeout(),i.player.off(l.TIME_UPDATE,i._checkCanplay))},i.clearTimeout=function(){i.showTimer&&clearTimeout(i.showTimer),i.showTimer=null},i.show=function(){L(i.el),i.player.emit(l.LOADING_SHOW)},i.hide=function(){P(i.el),i.player.emit(l.LOADING_HIDE)},i.hide(),r.options.loadingOptions.spinner?ot(i.el,[r.options.loadingOptions.spinner]):ot(i.el,i.getSpinner()),f(i,r.on(l.CANPLAY,i.hide)),f(i,r.on(l.WAITING,function(){i.player.currentTime&&i.tryShow()})),f(i,r.on(l.STALLED,function(){var o=i.player.currentTime;if(o){var s=!0;i.player.eachBuffer(function(u,p){if(u<=o&&p>o)return s=!1,!0}),s&&i.tryShow()}})),i}return e.prototype.getSpinner=function(){var t=this.player.options.loadingOptions.type;if(t==="wave")return d(this.el,"loading_wave"),se("<div></div>",5);if(t==="circle")return d(this.el,"loading_circle"),`<div>
            <div class="`+C+`_loading_circle_container">
              <div class="`+C+`_loading_circle_rotator">
                <div class="`+C+`_loading_circle_left">
                  <div class="`+C+`_loading_circle_circle"></div>
                </div>
                <div class="`+C+`_loading_circle_right">
                  <div class="`+C+`_loading_circle_circle"></div>
                </div>
              </div>
            </div>
          </div>`},Object.defineProperty(e.prototype,"isActive",{get:function(){return this.el.style.display!=="none"},enumerable:!1,configurable:!0}),e.prototype.checkCanplay=function(){this.startWaitingTime=this.player.currentTime,this.player.off(l.TIME_UPDATE,this._checkCanplay),this.player.on(l.TIME_UPDATE,this._checkCanplay)},e.prototype.tryShow=function(){this.checkCanplay(),this.clearTimeout(),this.showTimer=setTimeout(this.show,300)},e}(g),Qe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tn=function(n){Qe(e,n);function e(t,r,i){var o,s=n.call(this,t,".menu")||this;return s.player=r,s.items=i,s.willShowDefault=!1,s.hide=function(){P(s.el)},s.show=function(){L(s.el)},s.hide(),s.rect=new k(s.el,r),(o=s.items)===null||o===void 0||o.forEach(function(u){var p;return(p=u.init)===null||p===void 0?void 0:p.call(u,r,u)}),m(s,r.el,"contextmenu",function(u){if(s.hide(),u.target===s.player.video){if(!s.willShowDefault&&(u.preventDefault(),u.stopPropagation(),s.renderItems())){s.show(),s.rect.update(),s.player.rect.update();var p=s.rect,a=p.width,h=p.height,y=s.player.rect,A=y.x,R=y.y,w=window.innerWidth,U=window.innerHeight,et=u.clientX,nt=u.clientY,rt=et-A,it=nt-R;et+a>w&&(rt=w-a),nt+h>U&&(it=U-h),s.injectStyle({left:rt+"px",top:it+"px"})}r.options.showDefaultMenu?s.willShowDefault=!s.willShowDefault:s.willShowDefault=!1}}),m(s,document,"click",function(){s.hide(),s.willShowDefault=!1}),s}return e.prototype.getItemDoms=function(){var t=this;return this.items.filter(function(r){return r&&!r.hidden}).map(function(r){var i,o=c("div.menu_item");return(i=r.show)===null||i===void 0||i.call(r,t.player,r),r.html&&(o.innerHTML=r.html),r.disabled&&d(o,"menu_item_disabled"),r.checked&&d(o,"menu_item_checked"),r.click&&!r.disabled&&o.addEventListener("click",function(){var s;return(s=r.click)===null||s===void 0?void 0:s.call(r,t.player,r)}),o})},e.prototype.renderItems=function(){var t=this.getItemDoms();if(!t.length)return!1;Ot(this.el);var r=document.createDocumentFragment();return t.forEach(function(i){return r.appendChild(i)}),this.el.appendChild(r),!0},Object.defineProperty(e.prototype,"isActive",{get:function(){return this.el.style.display!=="none"},enumerable:!1,configurable:!0}),e}(g),en=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nn=function(n){en(e,n);function e(t,r,i){i===void 0&&(i="center");var o=n.call(this,t,".toast")||this;return o.position=i,d(o.el,"toast_"+i),G(r)&&o.el.appendChild(r),x(r)&&(o.el.innerHTML=r),o}return e.prototype.dispose=function(){n.prototype.dispose.call(this),clearTimeout(this.timer)},e}(g),rn=function(){function n(e){this.toasts=[],this.container=e}return n.prototype.show=function(e,t,r){r===void 0&&(r=3e3);var i=this.toasts.find(function(o){return o.position===t});return i?(clearTimeout(i.timer),G(e)&&(Ot(i.el),i.el.appendChild(e)),x(e)&&(i.el.innerHTML=e)):(i=new nn(this.container,e,t),this.toasts.push(i)),r>0&&(i.timer=setTimeout(this.close.bind(this,i),r)),i},n.prototype.close=function(e){if(e)return this.toasts=this.toasts.filter(function(t){return t!==e}),e.dispose();this.toasts.forEach(function(t){return t.dispose()}),this.toasts.length=0},n.prototype.dispose=function(){this.toasts&&(this.close(),this.toasts=null,this.container=null)},n}(),j={Escape:27,Space:32,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40},on=function(){function n(e,t){var r=this;this.player=e,this.onKeyDown=function(a){if(!(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)){var h=a.code||a.keyCode||a.which;if(!(!Vt(h)&&!x(h))){var y=!1,A=r.map[j[h]]||r.map[h];A&&(A(r.player),y=!0,r.player.controller.showThenFade()),y&&(a.preventDefault(),a.stopPropagation())}}},this.map=Object.create(null);var i=this.player.options.shortcutOptions,o=i.seekStep,s=i.showToast,u=i.toastDelay;this.timeout=u||500;var p=function(a){var h=c(".toast_icon"),y=T.volume(),A=T.muted(),R=c("span");R.innerHTML=Math.round(a.volume*100)+"%",Math.floor(a.volume*10)<=0?h.appendChild(A):h.appendChild(y),h.appendChild(R),a.toast.show(h,"center",r.timeout)};this.register(j.Escape,function(a){a.fullscreen.exit()||a.webFullscreen.exit()}),this.register(j.Space,function(a){return a.toggle()}),this.register(j.ArrowLeft,function(a){a.rewind(),s&&a.toast.show(v.trans(Ft)+" "+o+" "+(o>1?v.trans(K):v.trans(q)),"center",r.timeout)}),this.register(j.ArrowUp,function(a){a.incVolume(),s&&p(a)}),this.register(j.ArrowRight,function(a){a.forward(),s&&a.toast.show(v.trans(Rt)+" "+o+" "+(o>1?v.trans(K):v.trans(q)),"center",r.timeout)}),this.register(j.ArrowDown,function(a){a.decVolume(),s&&p(a)}),t||this.enable()}return n.prototype.register=function(e,t){this.map[e]=t},n.prototype.unregister=function(e){return delete this.map[e]},n.prototype.enable=function(){this.disable(),m(this,this.player.el,"keydown",this.onKeyDown)},n.prototype.dispose=function(){this.map&&(B(this),this.map=null)},n.prototype.disable=function(){B(this)},n}(),sn=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ln=function(n){sn(e,n);function e(t){var r,i,o=n.call(this)||this;return o.prevVolume=.5,o.controllerNameMap=Object.create(null),o.settingNamedMap=Object.create(null),o.menuNamedMap=Object.create(null),o.toggle=function(){o.paused?o.play():o.pause()},o.delayToggle=function(){o.toggleDelayTimer=setTimeout(function(){o.toggleDelayFlag||o.toggle(),o.toggleDelayFlag=!1},$.CLICK_TOGGLE_DELAY)},o.clearToggleDelay=function(s){o.toggleDelayTimer&&clearTimeout(o.toggleDelayTimer),o.toggleDelayTimer=null,s?o.toggleDelayFlag=!1:o.toggleDelayFlag=!0},o.options=kt(t),o.container=st(o.options.container),o.el=c("div."+C,{tabindex:0},void 0,""),o.video=c("video.video"),o.options.src&&(o.options.videoProps.src=o.options.src),Fe(o.video,o.options.videoProps),Me(o.el,o.options),Be(o),o.el.appendChild(o.video),He(o),o.rect=f(o,new k(o.el,o)),o.webFullscreen=f(o,new Xe(o)),o.fullscreen=f(o,new Ye(o)),o.poster=f(o,new qe(o.el,o)),o.loading=f(o,new Je(o.el,o)),o.toast=f(o,new rn(o.el)),o.shortcut=f(o,new on(o,o.options.shortcutOptions.disabled)),o.settingItems=o.options.settings.map(function(s){return x(s)?o.settingNamedMap[s]:s}).filter(Boolean),o.controller=new $e(o,o.el),o.menu=f(o,new tn(o.el,o,((i=(r=o.options.menus)===null||r===void 0?void 0:r.map(function(s){return x(s)?o.menuNamedMap[s]:s}))===null||i===void 0?void 0:i.filter(Boolean))||[])),o.toggleDelayFlag=!1,o.toggleDelayTimer=null,o.videoClickToggle(),o.emit(l.AFTER_INIT),o}return e.prototype.mount=function(t){t&&(this.container=st(t)||this.container),this.container&&(this.container.appendChild(this.el),Ut(this),this.emit(l.MOUNTED))},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.video.currentTime},set:function(t){if(this.duration){var r=t-this.video.currentTime;r&&(this.video.currentTime=S(t,0,this.duration))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this.video.readyState>=3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.video.duration||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this.video.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.video.paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this.video.ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return!this.paused&&!this.ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.video.volume},set:function(t){this.video.volume=S(t),this.muted&&t>0&&(this.muted=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this.video.muted||this.volume===0},set:function(t){this.video.muted=t,t&&(this.volume=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this.video.loop},set:function(t){this.video.loop=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this.video.playbackRate},set:function(t){this.video.playbackRate=t},enumerable:!1,configurable:!0}),e.prototype.play=function(){return this.video.play()},e.prototype.pause=function(){this.video.pause()},e.prototype.seek=function(t){this.video.currentTime=S(t,0,this.duration)},e.prototype.incVolume=function(t){t===void 0&&(t=this.options.shortcutOptions.volumeStep),this.volume+=t},e.prototype.decVolume=function(t){t===void 0&&(t=this.options.shortcutOptions.volumeStep),this.volume-=t},e.prototype.forward=function(t){t===void 0&&(t=this.options.shortcutOptions.seekStep),this.currentTime+=t},e.prototype.rewind=function(t){t===void 0&&(t=this.options.shortcutOptions.seekStep),this.currentTime-=t},e.prototype.toggleVolume=function(){this.muted?this.volume=this.prevVolume||1:(this.prevVolume=this.volume,this.volume=0)},e.prototype.videoClickToggle=function(){this.video.addEventListener("click",this.delayToggle)},e.prototype.cancellVideoClickToggle=function(){this.video.removeEventListener("click",this.delayToggle)},e.prototype.eachBuffer=function(t){for(var r=this.buffered.length,i=r-1;i>=0&&!t(this.buffered.start(i),this.buffered.end(i));i--);},e.prototype.registerControllerEle=function(t,r){this.controllerNameMap[r||t.id]=t},e.prototype.getControllerEle=function(t){return this.controllerNameMap[t]},e.prototype.registerSettingItem=function(t,r){this.settingNamedMap[r||t.id]=t},e.prototype.getSettingItem=function(t){return this.settingNamedMap[t]},e.prototype.registerMenuItem=function(t,r){this.menuNamedMap[r||t.id]=t},e.prototype.getMenuItem=function(t){return this.menuNamedMap[t]},e.prototype.updateControllerEles=function(t,r){this.controller.updateEles(t,r)},e.prototype.dispose=function(){this.el&&(this.emit(l.BEFORE_DISPOSE),B(this),this.removeAllListeners(),wt(this.el),this.el=null,this.container=null,this.clearToggleDelay(),this.emit(l.AFTER_DISPOSE))},e}(Bt);export{C as CLASS_PREFIX,l as EVENT,v as I18n,T as Icon,ln as Player,Ee as Popover,Te as Switch,$ as TIME,gt as Tooltip,ln as default};
