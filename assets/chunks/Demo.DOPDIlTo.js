import{d as M,p as s,u as z,v as $,V as O,q as G,o as b,c as E,t as R,k,e as A,j as f,n as S,_ as Y}from"./framework.etYTtafL.js";const F=[{text:"死亡搁浅！",color:"#f00",position:"fixed-top",timestatamp:.4},{text:"死亡搁浅！！",color:"#f00",position:"fixed-top",timestatamp:.4},{text:"死亡搁浅！！！",color:"#f00",position:"fixed-top",timestatamp:.4},{text:"小岛秀夫yyds",color:"#fff",position:"rolling",timestatamp:1.2},{text:"这部作品什么时候出下一部啊，好期待",color:"#fff",position:"rolling",timestatamp:1.2},{text:"生存之旅",color:"#00f",position:"fixed-top",timestatamp:1.2},{text:"我爱死亡搁浅！",color:"#f0f",position:"rolling",timestatamp:1.3},{text:"布里吉特的故事真挺感人的",color:"#ff0",position:"fixed-bottom",timestatamp:1.3},{text:"希望能再见到山姆啊啊啊",color:"#fff",position:"rolling",timestatamp:1.3},{text:"死亡搁浅的画面太美了，感觉像看电影",color:"#0f0",position:"fixed-top",timestatamp:1.4},{text:"你们觉得二代会怎样？",color:"#f90",position:"rolling",timestatamp:1.5},{text:"这游戏的音乐绝绝子",color:"#fff",position:"fixed-bottom",timestatamp:1.5},{text:"期待更多的剧情展开",color:"#0ff",position:"fixed-top",timestatamp:3},{text:"死神与连接的故事！",color:"#f00",position:"rolling",timestatamp:3.4},{text:"克劳斯好帅啊",color:"#fff",position:"fixed-bottom",timestatamp:3.5},{text:"每次冒险都令人心跳加速",color:"#f00",position:"fixed-top",timestatamp:4.5},{text:"死亡搁浅的玩法真挺独特",color:"#ff0",position:"rolling",timestatamp:4.5},{text:"山姆的背影让我心疼",color:"#0f0",position:"fixed-bottom",timestatamp:5},{text:"这游戏的设定太棒了",color:"#00f",position:"rolling",timestatamp:5.2},{text:"真希望能有续集",color:"#f0f",position:"fixed-top",timestatamp:6.2},{text:"连结的意义真深刻",color:"#0ff",position:"rolling",timestatamp:7.2},{text:"画面美得不可思议",color:"#fff",position:"fixed-bottom",timestatamp:9.2},{text:"孤独感和希望并存！",color:"#f90",position:"fixed-top",timestatamp:10.2},{text:"为山姆加油！",color:"#fff",position:"rolling",timestatamp:11.2},{text:"死亡搁浅的世界好迷人！",color:"#00f",position:"fixed-bottom",timestatamp:12.2},{text:"这段生存挑战挺有意思的。",color:"#00f",position:"fixed-top",timestatamp:13},{text:"故事情节吸引人。",color:"#f0f",position:"rolling",timestatamp:14},{text:"在探索未知的旅程",color:"#ff0",position:"fixed-bottom",timestatamp:16},{text:"感觉到一种连接和孤独。",color:"#fff",position:"rolling",timestatamp:16},{text:"山姆的经历很特别。",color:"#0f0",position:"fixed-top",timestatamp:12},{text:"主题确实很深刻。",color:"#f90",position:"rolling",timestatamp:14},{text:"音乐的选择很好。",color:"#fff",position:"fixed-bottom",timestatamp:11.2},{text:"沉浸感很强。",color:"#0ff",position:"fixed-top",timestatamp:13.2},{text:"对未来的故事很期待。",color:"#f00",position:"rolling",timestatamp:14.2},{text:"这种体验很独特。",color:"#fff",position:"fixed-bottom",timestatamp:4.2}],J={key:0,class:"title"},K={key:0,class:"danmu-container"},Q=["value","placeholder"],X=["value"],Z=M({__name:"Demo",props:{simple:{type:Boolean,default:!1}},setup(U){const x={"zh-CN":{title:"在线演示",send:"发送弹幕",danmuPlaceholder:"请输入弹幕"},"en-US":{title:"Online Demo",send:"Send Danmu",danmuPlaceholder:"Please input content"}},V=U,C=s(),i=s(null),P=s(null),_=s(null),q=s(null),p=s(null),D=s(null),c=s(null),{isDark:tt,lang:m}=z(),u=s(""),g=s("#0abbed"),L=()=>{var v;const e={html:"画中画",init(){this.hidden=!document.pictureInPictureEnabled},show(o,t){t.checked=document.pictureInPictureElement===o.video},click(o,t){o.video.readyState<3||(document.pictureInPictureElement!==o.video?o.video.requestPictureInPicture():(document.exitPictureInPicture(),t.checked=!1),this.show(o,t))}},l={html:"截图",click(o){var d;const t=document.createElement("canvas");t.width=o.video.videoWidth,t.height=o.video.videoHeight,(d=t.getContext("2d"))==null||d.drawImage(o.video,0,0,t.width,t.height),t.toBlob(r=>{let n=URL.createObjectURL(r);const a=document.createElement("a");a.href=n,a.download=`qier-player.${o.currentTime}.jpg`,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)})}},y={el:document.createElement("div"),init(o){const t=[{id:"1080p",label:"1080p HD",checked:!0,dom:null},{id:"720p",label:"720p",checked:!1,dom:null},{id:"480p",label:"480p",checked:!1,dom:null}];this.btn=document.createElement("div"),this.btn.textContent=t[0].label,this.el.appendChild(this.btn),this.stuffing=document.createElement("div"),this.stuffing.classList.add("qier-player_controller_quantity_stuffing"),this.el.appendChild(this.stuffing),this.popover=new q.value(this.el),this.el.addEventListener("mouseenter",()=>{this.stuffing.style.display="block",this.popover.show(),o.emit(p.value.POPOVER_SHOW_CHANGE)}),this.el.addEventListener("mouseleave",()=>{this.stuffing.style.display="none",this.popover.hide()}),this.el.classList.add("qier-player_controller_quantity");const d=document.createElement("div");t.forEach(r=>{const n=document.createElement("div");n.classList.add("qier-player_controller_quantity_item"),r.checked&&n.classList.add("qier-player_controller_quantity_item--active"),n.setAttribute("data-id",r.id),n.innerText=r.label,r.dom=n,d.appendChild(n),n.addEventListener("click",a=>{var I;if(a.stopPropagation(),a!=null&&a.target){const W=a.target.getAttribute("data-id"),T=t.find(h=>h.id===W);T.checked||(t.forEach(h=>{var w;h.checked=!1,(w=h.dom)==null||w.classList.remove("qier-player_controller_quantity_item--active")}),T.checked=!0,(I=r.dom)==null||I.classList.add("qier-player_controller_quantity_item--active"),this.btn.textContent=r.label,o.video.src=`/qier-player/test-video_${r.id}.mp4`)}})}),this.popover.panelEl.appendChild(d)}};i.value=new P.value({src:"/qier-player/test-video_1080p.mp4",menus:["loop",e,l],controller:{progress:["progress"],eles:["play","time","spacer",y,"volume","settings","web-fullscreen","fullscreen"]},thumbnail:{col:5,row:4,startSecond:0,gapSecond:1,images:["/qier-player/thumbnails/t1.jpg"]}}),i.value.mount(C.value),(v=i.value)==null||v.on(p.value.TIME_UPDATE,()=>{c.value&&i.value&&F.filter(t=>t.timestatamp>=i.value.currentTime&&t.timestatamp-i.value.currentTime<=.4).forEach(t=>{const d={text:t.text,color:t.color};c.value.add(d,t.position),t.checked=!0})}),V.simple||j()},j=()=>{if(!i.value)return;const e=document.createElement("div");e.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden;",i.value.el.appendChild(e),c.value=new D.value(e,{eventProxyElement:e,duration:15e3}),i.value.on(p.value.PLAY,()=>{var l;(l=c.value)==null||l.start()}),i.value.on(p.value.PAUSE,()=>{var l;(l=c.value)==null||l.stop()})};$(()=>{O(()=>import("./index.DU_EEQls.js"),[]).then(e=>{const{Player:l,I18n:y,Popover:v,EVENT:o}=e;O(()=>import("./index.BPgfpRpy.js"),[]).then(t=>{P.value=l,_.value=y,q.value=v,p.value=o,D.value=t.default,L()})})}),G(()=>m.value,()=>{_.value&&(_.value.setCurrentLang(m.value),i.value&&(i.value.dispose(),i.value=null,L()))},{immediate:!0});const N=()=>{if(c.value&&u.value){const e={text:u.value,color:g.value};c.value.add(e,"rolling"),u.value=""}},B=e=>{u.value=e.target.value},H=e=>{g.value=e.target.value};return(e,l)=>(b(),E("div",{class:S(["outer",{simple:e.simple}])},[e.simple?A("",!0):(b(),E("h2",J,R(x[k(m)].title),1)),f("div",{class:S(["content",{simple:e.simple}])},[f("div",{ref_key:"playerContainerRef",ref:C,class:"player-container"},null,512),e.simple?A("",!0):(b(),E("div",K,[f("input",{class:"danmu-input",type:"text",onInput:B,value:u.value,placeholder:x[k(m)].danmuPlaceholder},null,40,Q),f("input",{class:"danmu-color",type:"color",onChange:H,value:g.value},null,40,X),f("button",{onClick:N},R(x[k(m)].send),1)]))],2)],2))}}),it=Y(Z,[["__scopeId","data-v-c3ed4294"]]);export{it as D};
